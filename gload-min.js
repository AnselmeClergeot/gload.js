function progressBar(d,c,f,e){this.createCanvas=!0;this.graphicUpdater=new graphicUpdater(d,c,f,e);this.progressUpdater=new progressUpdater(this.graphicUpdater);this.setCanvas=function(a,b,c){this.createCanvas=!1;this.graphicUpdater.canvas=a;this.graphicUpdater.barX=b;this.graphicUpdater.barY=c};this.addFile=function(a,b,c){this.progressUpdater.addFile(a,b,c)};this.start=function(){this.createCanvas&&this.graphicUpdater.createCanvas();this.progressUpdater.start()};this.setColors=function(a,b){this.graphicUpdater.backgroundColor=
a;this.graphicUpdater.color=b};this.setBorder=function(a,b){this.graphicUpdater.borderWidth=a;this.graphicUpdater.borderColor=b};this.setBackgroundImage=function(a){this.graphicUpdater.backgroundImage.src=a};this.setFillImage=function(a){this.graphicUpdater.fillImage.src=a}}
function progressUpdater(d){this.files=[];this.totalFileNumber=this.actualFile=this.totalFileSize=0;this.graphicUpdater=d;this.start=function(){this.graphicUpdater.start();this.files[0].load()};this.addFile=function(c,d,e){this.files.push(new file(c,d,e,this));this.totalFileSize+=e;this.totalFileNumber++};this.fileHasLoaded=function(){this.graphicUpdater.actualProgression+=this.files[this.actualFile].size/this.totalFileSize;this.actualFile+1<this.totalFileNumber&&(this.actualFile++,this.files[this.actualFile].load())}}
function graphicUpdater(d,c,f,e){this.canvas;this.createCanvas=function(){this.canvas=appendCanvas(this.width,this.height)};this.width=d;this.height=c;this.barY=this.barX=0;this.backgroundColor=f;this.color=e;this.borderColor=this.borderWidth=0;this.backgroundImage=new Image;this.fillImage=new Image;this.backgroundImage.onerror=function(){console.log("Cannot load background image")};this.fillImage.onerror=function(){console.log("Cannot load fill image")};this.actualProgression=0;this.start=function(){setInterval(this.update,
1E3/60)};var a=this;this.update=function(){var b=a.canvas.getContext("2d");b.clearRect(a.barX,a.barY,a.width,a.height);""==a.backgroundImage.src?(b.fillStyle=a.backgroundColor,b.fillRect(a.barX,a.barY,a.width,a.height)):b.drawImage(a.backgroundImage,0,0,a.width,a.height,a.barX,a.barY,a.width,a.height);""==a.fillImage.src?(b.fillStyle=a.color,b.fillRect(a.barX,a.barY,a.actualProgression*a.width,a.height)):b.drawImage(a.fillImage,0,0,a.actualProgression*a.width,a.height,a.barX,a.barY,a.actualProgression*
a.width,a.height);0<a.borderWidth&&(b.strokeStyle=a.borderColor,b.lineWidth=a.borderWidth,b.strokeRect(a.barX,a.barY,a.width,a.height))}}function file(d,c,f,e){this.path=d;this.size=f;this.progressUpdater=e;"Image"==c?this.file=new Image:"Audio"==c?this.file=new Audio:console.log("Error on file type");this.load=function(){this.file.src=this.path};this.file.onerror=function(){console.log("Cannot load "+this.path)};var a=this;this.file.onload=function(){a.progressUpdater.fileHasLoaded()}}
function appendCanvas(d,c){document.body.innerHTML+='<canvas id="gloadCanvas" width="'+d+'" height="'+c+'"/>';return document.getElementById("gloadCanvas")};