function progressBar(b,c,e,d){this.createCanvas=!0;this.graphicUpdater=new graphicUpdater(b,c,e,d);this.progressUpdater=new progressUpdater(this.graphicUpdater);this.setCanvas=function(a,c,b){this.createCanvas=!1;this.graphicUpdater.canvas=a;this.graphicUpdater.barX=c;this.graphicUpdater.barY=b};this.addFile=function(a,c,b){this.progressUpdater.addFile(a,c,b)};this.start=function(){this.createCanvas&&this.graphicUpdater.createCanvas();this.progressUpdater.start()}}
function progressUpdater(b){this.files=[];this.totalFileNumber=this.actualFile=this.totalFileSize=0;this.graphicUpdater=b;this.start=function(){this.graphicUpdater.start();this.files[0].load()};this.addFile=function(c,b,d){this.files.push(new file(c,b,d,this));this.totalFileSize+=d;this.totalFileNumber++};this.fileHasLoaded=function(){this.graphicUpdater.actualProgression+=this.files[this.actualFile].size/this.totalFileSize;this.actualFile+1<this.totalFileNumber&&(this.actualFile++,this.files[this.actualFile].load())}}
function graphicUpdater(b,c,e,d){this.canvas;this.createCanvas=function(){this.canvas=appendCanvas(this.width,this.height)};this.width=b;this.height=c;this.barY=this.barX=0;this.backgroundColor=e;this.color=d;this.actualProgression=0;this.start=function(){setInterval(this.update,1E3/60)};var a=this;this.update=function(){var b=a.canvas.getContext("2d");console.log(a.actualProgression*a.width);b.clearRect(a.barX,a.barY,a.width,a.height);b.fillStyle=a.backgroundColor;b.fillRect(a.barX,a.barY,a.width,
a.height);b.fillStyle=a.color;b.fillRect(a.barX,a.barY,a.actualProgression*a.width,a.height)}}function file(b,c,e,d){this.path=b;this.size=e;this.progressUpdater=d;"Image"==c&&(this.file=new Image);"Audio"==c?this.file=new Audio:console.log("Error on file type");this.load=function(){this.file.src=this.path};this.file.onerror=function(){console.log("Cannot load "+this.path)};var a=this;this.file.onload=function(){a.progressUpdater.fileHasLoaded()}}
function appendCanvas(b,c){document.body.innerHTML+='<canvas id="gloadCanvas" width="'+b+'" height="'+c+'"/>';return document.getElementById("gloadCanvas")};